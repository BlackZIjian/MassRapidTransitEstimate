# 数据输出模块

## 系统架构

架构图

### 数据流模块

类图

生命周期图

#### 接口详细设计

接口名：InputStream::Open()

功能：创建一个可存储已知数据的数据流，不可修改

参数：数据长度，数据解码类型，数据

返回值：InputStream实例

算法描述：

+ 根据参数中的数据长度和数据解码类型计算出数据所占用的内存大小
+ 为成员变量data向内存申请计算大小的内存空间
+ 标记该流为繁忙状态
+ 调用内部Read()函数，将数据按顺序存储到申请的空间中
+ 将数据长度，数据格式赋值给data_length,data_type
+ 返回指向自身的指针或实例
+ 标记该流为空闲

接口流程：





接口名：InputStream::Close()

功能：关闭一个数据流并释放内存

参数：无

返回值：无

算法描述：

+ 释放掉data指向的流数据
+ 释放掉自身所占内存

接口流程：



接口名：OutputStream::Open()

功能：创建一个空的数据流对象，可以写入

参数：数据类型

返回值：OutputStream实例

算法描述：

+ 为自身申请一个内存空间
+ 将data_lenth赋值为0
+ 为data申请一个地址
+ 返回指向自身的指针或实例

接口流程：



接口名：OutputStream::Write()

功能：将数据写入到可写入的数据流中

参数：数据，数据长度，数据类型

返回值：无

算法描述：

+ 根据参数中的数据长度和数据解码类型计算出数据所占用的内存大小
+ 标记该流为繁忙状态
+ 为data追加相应大小的内存空间
+ 调用内部Read()函数，将数据按顺序存储到申请的空间中
+ 将数据长度追加data_length
+ 标记该流为空闲

接口流程：



接口名：OutputStream::Close()

功能：关闭一个数据流，并释放内存

参数：无

返回值：无

算法描述：

- 释放掉data指向的流数据
- 释放掉自身所占内存

接口流程：





### 数据解码模块

类图

生命周期图

#### 接口详细设计

接口名：FormatChanger::Read()

功能：创建一个解码器，并进行解码

参数：原数据

返回值：FormatChanger实例

算法描述：

+ 为成员变量result申请输入数据大小 * 128/48大小的空间


+ 将输入数据按48位分割为一个temp数组
+ 对temp数组每一个元素循环做以下处理
  + 取0-5位，以前缀0扩充至32位，追加到result
  + 取6-11位，以前缀0扩充至32位，追加到result
  + 取12-15位，以前缀0扩充至32位，追加到result
  + 取16-47位，追加到result
+ 释放掉temp数组

接口流程：





接口名：DataChanger::Output()

功能：取出转码后的结果并释放内存

参数：无

返回值：转码后数据

算法描述：

+ 新建二进制流变量output，值赋为result
+ 释放掉result内存空间
+ 传出output
+ 释放掉自身

接口流程：



### 数据解压缩模块

类图

生命周期图

#### 接口详细设计

接口名：PatchChanger::Read()

功能：创建一个解压器，并进行转码

参数：原数据

返回值：PatchChanger实例

算法描述：

- 读取原数据获得字符频率数组长度

- 按长度读取字符频率数组

- 以字符频率数组创建哈夫曼树

- 继续读取原数据，读到0则从当前树节点向左延伸，读到1则从当前树节点向右延伸，延伸到叶节点后取出字符，直到读完原数据

- 将字符转为二进制输出


接口流程：





接口名：PatchChanger::Output()

功能：取出转码后的结果并释放内存

参数：无

返回值：转码后数据

算法描述：

- 新建二进制流变量output，值赋为result
- 释放掉result内存空间
- 传出output
- 释放掉自身

接口流程：



### 数据输出模块

类图

生命周期图

#### 接口详细设计



接口名：Print()，输出数据

功能：将经过计算的结果数据按需求输出

参数：无

返回值：无

算法描述：

+ 调用输出数据流的Open函数，并传入datas
+ 将数据输出到外部作图软件
+ 画出可视化图像

接口流程：





### 数据接收模块

类图

生命周期图

#### 接口详细设计

接口名：DataReciver::Recive()

功能：长时间监听固定路由，当有信号时接收数据

参数：监听时间

返回值：无

算法描述：

+ 创建监听请求
+ 在未达到监听时间时持续监听
+ 接到信号时存储数据

接口流程图：

